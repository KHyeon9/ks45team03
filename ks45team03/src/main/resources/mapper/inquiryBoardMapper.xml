<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ks45team03.rentravel.mapper.InquiryBoardMapper">
	
	<resultMap type="InquiryBoard" id="inquiryBoardResultMap">
		<id property="inquiryBoardCode" column="inquiry_board_code" />
		<result property="userId" column="user_id"/>
		<result property="inquiryBoardTitle" column="inquiry_board_title"/>
		<result property="inquiryBoardContent" column="inquiry_board_content"/>
		<result property="inquiryBoardType" column="inquiry_board_type"/>
		<result property="inquiryBoardRegTime" column="inquiry_board_reg_time"/>
		<association property="user" javaType="User">
			<id property="userId" 	  		column="user_id"/>
			<result property="userNickName" 	column="user_nickname"/>
		</association>
	</resultMap>
	
	<select id="getInquiryBoard" parameterType="String" resultMap="inquiryBoardResultMap">
		SELECT
			ib.inquiry_board_code
			,ib.user_id
			,ib.inquiry_board_title
			,ib.inquiry_board_content
			,ib.inquiry_board_type
			,ib.inquiry_board_reg_time
			,u.user_nickname
		FROM 
			tb_inquiry_board AS ib
			INNER JOIN 
			tb_user AS u
			ON 
			ib.user_id = u.user_id 
		WHERE 
	ib.inquiry_board_code = #{inquiryBoardCode};
	</select>
	
	
	<select id="getInquiryBoardList" parameterType="int" resultMap="inquiryBoardResultMap">
		SELECT
			ib.inquiry_board_code
			,ib.user_id
			,ib.inquiry_board_title
			,ib.inquiry_board_content
			,ib.inquiry_board_type
			,ib.inquiry_board_reg_time
			,u.user_nickname
		FROM 
			tb_inquiry_board AS ib
			INNER JOIN 
			tb_user AS u
			ON 
			ib.user_id = u.user_id
		<if test="startIndex != null and startIndex > -1">
			LIMIT #{startIndex}, #{pageSize};
		</if>
	</select>
	

	<select id="inquiryBoardListCnt" resultType="int">
	/* 1 대 1 문의게시판 목록 행 갯수 */
		SELECT
			COUNT(1)
		FROM
			tb_inquiry_board;
	</select>

</mapper>