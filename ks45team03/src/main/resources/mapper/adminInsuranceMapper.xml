<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ks45team03.rentravel.mapper.AdminInsuranceMapper" >    
	<!-- tb_insurance -->
	<resultMap type="Insurance" id="insuranceResultMap">
		<id property="insuranceCode" 			column="insurance_code"/>
		<result property="userId" 		column="user_id"/>
		<result property="goodsCode" 		column="goods_code"/>
		<result property="paymentCode" 	column="payment_code"/>
		<result property="rentalCode" 	column="rental_code"/>
		<result property="insuranceSignUpTime" 	column="insurance_sign_up_time"/>
	</resultMap>
	
	<!-- tb_insurance_request -->
	<resultMap type="InsuranceRequest" id="insuranceRequestResultMap">
		<id property="insuranceRequestCode" 			column="insurance_request_code"/>
		<result property="insuranceCode" 		column="insurance_code"/>
		<result property="userId" 		column="user_id"/>
		<result property="goodsCode" 	column="goods_code"/>
		<result property="paymentCode" 	column="payment_code"/>
		<result property="accidentCode" 	column="accident_date"/>
		<result property="accidentType" 	column="accident_type"/>
		<result property="accidentContent" 	column="accident_content"/>
		<result property="insuranceEvidence" 	column="insurance_evidence"/>
		<result property="bankName" 	column="bank_name"/>
		<result property="accountHolder" 	column="account_holder"/>
		<result property="accountNumber" 	column="account_number"/>
		<result property="requestDate" 	column="request_date"/>
	</resultMap>
	
	<!-- tb_insurance_claim -->
	<resultMap type="InsuranceClaim" id="insuranceClaimResultMap">
		<id property="insuranceClaimCode" 			column="insurance_claim_code"/>
		<result property="userId" 		column="user_id"/>
		<result property="insuranceRequestCode" 		column="insurance_request_code"/>
		<result property="insuranceRequestStateCode" 	column="insurance_request_state_code"/>
		<result property="insuranceClaimModifyDate" 	column="insurance_claim_modify_date"/>
	</resultMap>
	
	<!-- tb_insurance_payout -->
	<resultMap type="insurancePayout" id="insurancePayoutResultMap">
		<id property="insurancePayoutCode" 			column="insurance_payout_code"/>
		<result property="userId" 		column="user_id"/>
		<result property="insuranceRequestCode" 		column="insurance_request_code"/>
		<result property="insuranceClaimCode" 	column="insurance_claim_code"/>
		<result property="insurancePayoutPrice" 	column="insurance_payout_price"/>
		<result property="insurancePayoutDate" 	column="insurance_payout_date"/>
	</resultMap>
	
	<select id="adminGetInsuranceList"  resultMap="insuranceResultMap">
		/* 보험리스트조회 */
		SELECT
			i.insurance_code,
			i.user_id,
			i.goods_code,
			i.payment_code,
			i.rental_code,
			i.insurance_sign_up_time
		FROM
			tb_insurance AS i
		ORDER BY
			i.insurance_code;
		
	</select>
	
	<select id="adminGetInsuranceClaimList" resultMap="insuranceClaimResultMap">
		/* 보험청구서리스트조회 */
		SELECT
			ic.insurance_claim_code,
			ic.user_id,
			ic.insurance_request_code,
			ic.insurance_request_state_code,
			ic.insurance_claim_modify_date
		FROM
			tb_insurance_claim AS ic
		ORDER BY
			ic.insurance_claim_code;
	</select>
	
	<select id="adminGetInsurancePayoutList" resultMap="insurancePayoutResultMap">
		/* 보상금지급내역조회 */
		SELECT
			ip.insurance_payout_code,
			ip.user_id,
			ip.insurance_request_code,
			ip.insurance_claim_code,
			ip.insurance_payout_price,
			ip.insurance_payout_date
		FROM
			tb_insurance_payout AS ip
		ORDER BY
			ip.insurance_payout_code;
	</select>
	<select id="adminGetInsuranceRequestList" resultMap="insuranceRequestResultMap">
		/* 보상금신청서(상세화면)조회 */
		SELECT
			ir.insurance_request_code,
			ir.insurance_code,
			ir.user_id,
			ir.goods_code,
			ir.payment_code,
			ir.accident_date,
			ir.accident_type,
			ir.accident_content,
			ir.insurance_evidence,
			ir.bank_name,
			ir.account_holder,
			ir.account_number,
			ir.request_date
		FROM
			tb_insurance_request AS ir
		ORDER BY
			ir.insurance_request_code;
	</select>
</mapper>