<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{user/layout/default}">
	  
	  <th:block layout:fragment="customContents">
	  	<!-- LIGHT SECTION -->
	      <section class="lightSection clearfix pageHeader">
	        <div class="container">
	          <div class="row">
	            <div class="col-md-6">
	              <div class="page-title">
	                <h2>MY Rent</h2>
	              </div>
	            </div>
	            <div class="col-md-6">
	              <ol class="breadcrumb float-right">
	                <li>
	                  <a th:href="@{/}">Home</a>
	                </li>
	                <li class="active">MY RENT</li>
	              </ol>
	            </div>
	          </div>
	        </div>
	      </section>
	
	      <!-- MAIN CONTENT SECTION -->
	      <section class="mainContent clearfix userProfile">
	        <div class="container">
	          <div class="row">
	            <div class="col-12">
	              <div class="btn-group" role="group" aria-label="..." style="float: right">
	                <a th:href="@{/myPage/myOrderList}" class="btn btn-default"><i class="bi bi-calendar-check" aria-hidden="true"></i>주문 내역</a>
	                <a th:href="@{/myPage/myRentList}" class="btn btn-default"><i class="bi bi-calendar-check" aria-hidden="true"></i>렌트 내역</a>
	              </div>
	            </div>
          	  </div>
	          <div class="row">
	            <div class="col-md-12">
	              <div class="innerWrapper">
	                <div class="orderBox">
	                  <h2>My Rent</h2>
	                  <div class="table-responsive">
	                    <table class="table">
	                      <thead>
	                        <tr>
	                          <th>상품명</th>
	                          <th>렌탈 시작일</th>
	                          <th>렌탈 종료일</th>
	                          <th>상품 총가격</th>
	                          <th>상품 수수료</th>
	                          <th>총 결산 금액</th>
	                          <th>상품 상태</th>
	                          <th>결제 시간</th>
	                          <th></th>
	                        </tr>
	                      </thead>
	                      <tbody>
                      		<tr th:each="rent : ${rentList}">
	                          <td th:text="${rent.goodsName}"></td>
	                          <td th:text="${rent.rentalStartDate}">March 25, 2016</td>
	                          <td th:text="${rent.rentalEndDate}">2</td>
	                          <th:block th:object="${rent.payment}">
	                          	<td th:text="*{expectedPaymentAmount}"></td>
	                          	<td th:text="*{goodsCommisionTotalPrice}"></td>
	                          	<td th:text="*{settlementAmount}"></td>
	                          </th:block>
	                          <th:block>
		                          <td th:if="${rent.orderStateName == '배송전 결제완료(취소 및 환불가능)'}"><span class="badge badge-warning">결제완료</span></td>
		                          <td th:if="${rent.orderStateName == '배송중(오너)'}"><span class="badge badge-info">배송중</span></td>
		                          <td th:if="${rent.orderStateName == '배송중(렌터)'}"><span class="badge badge-info">배송중</span></td>
		                          <td th:if="${rent.orderStateName == '사용중(배송완료)'}"><span class="badge badge-primary">사용중</span></td>
		                          <td th:if="${rent.orderStateName == '반납완료'}"><span class="badge badge-success">반납완료</span></td>
		                          <td th:if="${rent.orderStateName == '취소 후 환불완료'}"><span class="badge badge-danger">취소</span></td>
		                      </th:block>
		                      <td th:text="${rent.rentalOrderDate}"></td>
	                          <td>
	                          	<a th:if="${rent.orderStateName == '배송전 결제완료(취소 및 환불가능)'}" th:href="@{/myPage/addMyRentWaybill(rentalCode=${rent.rentalCode})}" class="btn btn-sm btn-secondary-outlined">배송입력</a>
	                          	<form th:if="${rent.orderStateName == '배송중(렌터)'}" id="returnForm" action="/myPage/returnCheck" method="POST" role="form">
	                          		<input th:value="${rent.payment.paymentCode}" name="paymentCode" type="hidden">
	                          		<button  type="submit" id="returnCheck" class="btn btn-sm btn-secondary-outlined">반납확인</button>
	                          	</form>
	                          </td>
	                        </tr>
	                      </tbody>
	                    </table>
	                  </div>
	                </div>
	                <!-- 페이징 -->
	                <div style="margin-top: 50px; display: flex; justify-content: center;" class="blogPage">
		          		<div class="col-sm-6">
							<div class="text-left">
								<ul class="pagination" style="justify-content: center;">
									<li th:if="${pagination.curRange != 1}">
										<a th:href="@{/myPage/myProfitList}" aria-label="First"><span aria-hidden="true"><<</span></a>
									</li>
									<li th:if="${pagination.curPage != 1}">
										<a th:href="@{/myPage/myProfitList(curPage=${pagination.prevPage})}" aria-label="Prev"> <span aria-hidden="true">&#60;</span></a>
									</li>
									
									<th:block th:each="pageNum : ${#numbers.sequence(pagination.startPage, pagination.endPage)}">
										<li class="active" th:if="${pageNum == pagination.curPage}">
											<a th:text="${pageNum}"></a>
										</li>
										<li th:unless="${pageNum == pagination.curPage} or ${pagination.listCnt == 0}">
											<a th:href="@{/myPage/myProfitList(curPage=${pageNum})}" th:text="${pageNum}"></a>
										</li>
									</th:block>

									<li th:if="${pagination.curPage != pagination.pageCnt && pagination.pageCnt > 0}">
										<a th:href="@{/myPage/myProfitList(curPage=${pagination.nextPage})}" aria-label="Next"> <span aria-hidden="true">&#62;</span></a>
									</li>
									<li th:if="${pagination.curRange != pagination.rangeCnt && pagination.rangeCnt > 0}">
										<a th:href="@{/myPage/myProfitList(curPage=${pagination.pageCnt})}" aria-label="Last"> <span aria-hidden="true">>></span></a>
									</li>
								</ul>
							</div>
						</div>
		        	</div>
		        	<!-- 페이징 끝  -->
	            </div>
	          </div>
	        </div>
	      </section>
	  </th:block>
</html>